<!DOCTYPE html><html lang="en"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><title>A GPT2+BERT reddit reply bot in 20 minutes | bonkerfield</title><meta name="description" content="just your standard information identity spacetime field"><meta itemprop="name" content="will stedden"><meta itemprop="description" content="just your standard information identity spacetime field"><meta itemprop="image" content="https://bonkerfield.org/assets/images/2020/tup_too_real.png"><meta property="og:url" content="https://bonkerfield.org/2020/04/twenty-minute-gpt2-reply-bot/"><meta property="og:type" content="website"><meta property="og:title" content="A GPT2+BERT reddit reply bot in 20 minutes | bonkerfield"><meta property="og:site_name" content="bonkerfield"><meta property="og:description" content="just your standard information identity spacetime field"><meta property="og:image" content="https://bonkerfield.org/assets/images/2020/tup_too_real.png"><meta property="twitter:url" content="https://bonkerfield.org/2020/04/twenty-minute-gpt2-reply-bot/"><meta property="twitter:card" content="summary_large_image"/><meta property="twitter:title" content="A GPT2+BERT reddit reply bot in 20 minutes | bonkerfield"><meta property="twitter:site" content="bonkerfield"><meta property="twitter:description" content="just your standard information identity spacetime field"><meta property="twitter:creator" content="@bonkerfield"><meta property="twitter:image" content="https://bonkerfield.org/assets/images/2020/tup_too_real.png"><link rel="icon" type="image/x-icon" href="/assets/images/favicon.ico"><link rel="stylesheet" href="/assets/css/app.min.css"><link rel="alternate" type="application/rss+xml" title="bonkerfield" href="/feed.xml"><link rel="canonical" href="/2020/04/twenty-minute-gpt2-reply-bot/"><link href="https://fonts.googleapis.com/css?family=Exo" rel="stylesheet"><link rel="webmention" href="https://webmention.io/bonkerfield.org/webmention" /><link rel="pingback" href="https://webmention.io/bonkerfield.org/xmlrpc" /> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-132451521-2"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-132451521-2'); </script><link href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css' rel='stylesheet'/></head><body id="a-gpt2-bert-reddit-reply-bot-in-20-minutes" class="post-layout"><header class="header"> <span><sup><a class="header__leadin" href="https://will.stedden.org">will.stedden ></a> </sup> <a class="header__title" href="/">bonkerfield</a></span><nav><ul class="header__list"><li><a href="/things">things</a></li><li><a href="/doings">doings</a></li><li><a href="/reasons">reasons</a></li><li><a href="https://viewfoil.bonkerfield.org/"><i class="fa fa-envelope"></i></a></li><li><a href="/search"><i class="fa fa-search"></i></a></li></ul></nav></header><a style="display:none;" class="p-author h-card" href="http://bonkerfield.org"> <img alt="" src="/assets/images/main/face_prof.jpg"/> will stedden</a><main class="bonk"><div class="post"><article class="h-entry" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting"><div class="post__header section-padding-half"><div class="grid-small"><h2 itemprop="name headline p-name">A GPT2+BERT reddit reply bot in 20 minutes</h2><time class="post__date dt-published" datetime="2020-04-18T00:00:00-07:00" itemprop="datePublished">2020·04·18</time> <span class="post__author"> | <a class="p-name u-url" href="http://will.stedden.org" title="about">will stedden</a> </span><p class="post__description p-summary"></p><a class="u-url" style="display:none;" href="https://bonkerfield.org/2020/04/twenty-minute-gpt2-reply-bot/"></a></div></div><div class="post__content section-padding"><div class="grid"><div class="e-content" id="markdown" itemprop="articleBody"><p> There's a new subreddit called <a href="https://www.reddit.com/r/talkwithgpt2bots/">talkwithgpt2bots</a> that's intended to let people interact with AI based comment bots. I got my <a href="https://www.reddit.com/user/tupperware-party">tupperware-party</a> bot working again on there, but it would be awesome to have a bunch of bots interacting there. To help others get started building comment bots, I figured I could simplify my previous <a href="/2020/02/reddit-bot-gpt2-bert/">GPT2-BERT tutorial</a> to be even simpler to run.</p><p> I put all of the code, data, and models for tupperware-party in one place. Below I've written out a guide to run a duplicate of my bot explaining each of these steps:</p><ul><li>1. Make a reddit app so your bot has credentials</li><li>2. Copy the data and notebooks into your Google Drive home directory</li><li>3. Enter your credentials into the Google Colab notebooks</li><li>4. Run the *step1.ipynb notebook and let it finish</li><li>5. Run the *step2.ipynb notebook</li></ul><p> Below, I'll go into those 5 steps in a little more detail.</p><p> <em>Update 05/01: I've added a new bot script that doesn't just reply in place. The new script pulls a comment from another subreddit and adds it to our <a href="https://www.reddit.com/r/talkwithgpt2bots/">talkwithgpt2bots</a> subreddit along with an AI generated reply.</em></p><h4>1. Make a reddit app</h4><p> Your bot will need credentials to post replies on reddit. Reddit apps are completely free to make. To get your app credentials set up you can follow the following directions (which I addapted from <a href="https://github.com/reddit-archive/reddit/wiki/OAuth2-Quick-Start-Example#first-steps">this page</a>).</p><p> Go to your <a href="https://www.reddit.com/prefs/apps">app preferences</a>. Click the "Create app" or "Create another app" button. Fill out the form like so:</p><pre>
    name: My Example App
    App type: Choose the "script" option
    description: You can leave this blank
    about url: You can leave this blank
    redirect url: http://www.example.com/unused/redirect/uri (We won't be using this as a redirect)
</pre><p> Hit the "create app" button. Make note of the client ID and client secret. For the rest of this page, it will be assumed that:</p><img src="/assets/images/2020/reddit_credentials.png" /><h4>2. Copy the data and all the code on Google Drive</h4><p> I've put all the code, all the data you'll need, and the pretrained models into <a href="https://drive.google.com/drive/folders/1P0iSXn44V9NPy-aFHVlotHR7B4jG-b84?usp=sharing">this shared folder</a> on Google Drive. Open that and make save your own copy to your Google Drive.</p><img src="/assets/images/2020/make_a_copy.jpg" /><p> Note: You need to save all of that into the top level folder of your Google Drive. The example code assumes that all of the necessary files are sitting in the top level (ie "My Drive" not a subfolder).</p><h4>3. Enter your credentials</h4><p> Once you have your own copies, you need to edit the two Google Colab notebooks (reddit_reply_bot_simple_step1.ipynb and reddit_reply_bot_simple_step1.ipynb) with the specific details for your reddit app from Step 1 above. All the changes should take place right at the top of the file.</p><img src="/assets/images/2020/colab_edit.png" /><p> You can change the name of the intermediate file (<code>save_to_drive_csv_name = 'proposed_replies_testing.csv'</code>) to whatever you want.</p><h4>4. Run reddit_reply_bot_simple_<strong>step1</strong>.ipynb</h4><p> With your credentials you can now run the script that creates replies. There are two additional parameters that you can change, which will randomize the output message. If you leave these params the same, your bot will exactly match what tupperware-party says.</p><p> When you're ready, press the play button in the top left corner. It will spin for a while and a bunch of text will start to be outputed below. Eventually, the following prompt will appear.</p><img src="/assets/images/2020/mount_gdrive.png" /><p> Follow the link to mount your Google Drive into the Google Colab environment. This allows you to load the pretrained models.</p><p> After a bit longer the script will finish, and you'll have saved a bunch of candidate replies in the file <code>save_to_drive_csv_name</code>. Then you are ready to move onto step 2.</p><h4>5. Run reddit_reply_bot_simple_<strong>step2</strong>.ipynb</h4><p> Now open the step2 notebook, make sure the credentials are the same as from part 1. There are a few other parameters that you can edit here. They control how strongly you filter the replies. Edit them how you like, if you don't get any results make these filters less stringent.</p><img src="/assets/images/2020/colab_params.png" /><p> Run the script by pressing the play button. More stuff will be printed out, and you'll need to mount your Google Drive just like in step 4. This one will take even longer to run. Eventually you will see some output that contains <code>REPLYING NOW WITH:</code> like the following.</p><img src="/assets/images/2020/tup_reply.png" /><p> When this is being printed, the bot should be submitting responses in real-time. You can log onto reddit and find the corresponding threads to see its response there. Or go to your bots home page (<code>reddit.com/user/{your_bot_name}</code>) to see all of its comments.</p><h4>*Bonus: Generating posts from replies in other subreddits.</h4><p> I've added two additional scripts in the Google Drive folder called <code>reddit_post_bot_simple_step1.ipynb</code> and <code>reddit_post_bot_simple_step2.ipynb</code>. As their names suggest, these bots will actually generate new posts on <a href="https://www.reddit.com/r/talkwithgpt2bots/">talkwithgpt2bots</a> based off of comments from other subreddits. You can use them in exactly the same way as the above two scripts but they have a few extra features. I challenge you to figure out the details, but feel free to ask questions.</p><h4>Questions?</h4><p> If you run into any issues or if there's something confusing, please let me know. I'll be quickest to respond on <a href="https://twitter.com/bonkerfield">Twitter</a> or <a href="https://fosstodon.org/@bonkerfield">Mastodon</a>. You can learn more about this project <a href="/2020/02/combining-gpt-2-and-bert/">here</a> or learn how to customize this bot on new input data <a href="/2020/02/reddit-bot-gpt2-bert/">here</a>. Have fun with this, but please, think before you use it for something bad.</p></div></div></div><div class="section-padding--none"><div class="grid"><hr class="sep" /></div></div><div class="section-padding"><div class="grid-small"><h3 class="post__discussion">Discussion Around the <a href="https://indieweb.org/Webmention">Web</a></h3><div id="webmentions"></div><hr style="margin: 5px 0;" class="sep" /><p>Join the Conversation</p><form target="_blank" name="tweet" action="https://twitter.com/share" method="get"> <input type="hidden" name="original_referer" value="https://bonkerfield.org/2020/04/twenty-minute-gpt2-reply-bot/"> <input type="hidden" name="source" value="bonkerfield"> <textarea style="border-color:#aaa;" id="textar" name="text" maxlength="140"></textarea> <input type="hidden" name="url" value="https://bonkerfield.org/2020/04/twenty-minute-gpt2-reply-bot/"> <button class="btn btn-sm btn-social btn-tw" type="submit" id="button"> <i class="fab fa-twitter"></i> <br/>comment by tweet </button> </form><hr style="margin: 5px 0;" class="sep" /> <form target="_blank" name="tweet" action="https://www.reddit.com/submit" method="get"> <input type="hidden" name="source" value="bonkerfield"> <textarea style="border-color:#aaa;" id="textar" name="title" maxlength="140"></textarea> <button class="btn btn-sm btn-social btn-rd" type="submit" id="button"> <i class="fab fa-reddit-alien"></i> <br/>submit to reddit </button> <input type="hidden" name="url" value="https://bonkerfield.org/2020/04/twenty-minute-gpt2-reply-bot/"> </form> <script src="/assets/js/webmention.min.js"></script></div></div></article></div><section class="related section-padding"><div class="grid-xlarge"><h2 class="related__title">Related</h2><div class="related__container"><article class="related__post"> <a class="related__link" href="https://bonkerfield.org/2020/09/su-chef-slices/"><figure class="related__img"> <img src="/assets/images/2020/suchef_overhead.jpg" alt="su_chef slices" /></figure><div><h2 class="related__text">su_chef slices</h2></div></a></article><article class="related__post"> <a class="related__link" href="https://bonkerfield.org/2020/08/braccio-moveit-gazebo/"><figure class="related__img"> <img src="/assets/images/2020/braccio_pick_demo.gif" alt="Simulating the Braccio robotic arm with ROS and Gazebo" /></figure><div><h2 class="related__text">Simulating the Braccio robotic arm with ROS and Gazebo</h2></div></a></article><article class="related__post"> <a class="related__link" href="https://bonkerfield.org/2020/05/timeline-streamgraph-google-sheet/"><figure class="related__img"> <img src="/assets/images/2020/political_ads.png" alt="Timeline Streamgraph from Google Sheets Data" /></figure><div><h2 class="related__text">Timeline Streamgraph from Google Sheets Data</h2></div></a></article></div></div></section></main><footer class="footer section-padding"><div class="grid"><div class="subscribe" id="subscribe"><div class="subscribe__container"> <span class="subscribe__title">Subscribe</span><p class="subscribe__text">Get an update when I post new content.</p><form method="POST" action="https://bonkerfield.us4.list-manage.com/subscribe/post-json?u=68d1146ea8fe327def203f254&amp;id=e88ba623c5&amp;c=?" id="mc-signup" name="mc-embedded-subscribe-form" novalidate><div style="position: absolute; left: -5000px;" aria-hidden="true"> <input type="text" name="b_68d1146ea8fe327def203f254_e88ba623c5" tabindex="-1" value=""></div><div class="form-group"> <input id="mce-EMAIL" type="email" name="EMAIL" placeholder="Email Address"></div><div class="form__btn"> <input id="mc-submit" type="submit" value="Sign Up" name="subscribe"></div></form><p class="subscribe__error hidden"></p></div></div><hr class="sep--white"/><div class="footer__container"><ul class="footer__social"><li><a href="https://twitter.com/bonkerfield" rel="me" target="_blank"><i class="fab fa-twitter"></i></a></li><li><a href="https://www.linkedin.com/in/willstedden" rel="me" target="_blank"><i class="fab fa-linkedin"></i></a></li><li><a href="https://github.com/stedn" rel="me" target="_blank"><i class="fab fa-github"></i></a></li><li><a href="https://codepen.io/stedn/" rel="me" target="_blank"><i class="fab fa-codepen"></i></a></li><li><a href="https://www.reddit.com/user/bonkerfield" rel="me" target="_blank"><i class="fab fa-reddit-alien"></i></a></li><li><a href="https://fosstodon.org/@bonkerfield" rel="me" target="_blank"><i class="fab fa-mastodon"></i></a></li><li><a href="https://www.are.na/will-stedden" rel="me" target="_blank"><svg height='16px' id='svg4' inkscape:version='1.0.1 (1.0.1+r75)' sodipodi:docname='arena.svg' version='1.1' viewBox='0 0 150.38 88.986' xmlns='http://www.w3.org/2000/svg' xmlns:cc='http://creativecommons.org/ns#' xmlns:dc='http://purl.org/dc/elements/1.1/' xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape' xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns#' xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd' xmlns:svg='http://www.w3.org/2000/svg'><metadata id='metadata10'> <rdf:RDF> <cc:Work rdf:about=''> <dc:format>image/svg+xml</dc:format> <dc:type rdf:resource='http://purl.org/dc/dcmitype/StillImage'/> <dc:title/> </cc:Work> </rdf:RDF> </metadata> <defs id='defs8'/> <sodipodi:namedview bordercolor='#666666' borderopacity='1' gridtolerance='10' guidetolerance='10' id='namedview6' inkscape:current-layer='svg4' inkscape:cx='52.509912' inkscape:cy='50.941261' inkscape:pageopacity='0' inkscape:pageshadow='2' inkscape:window-height='719' inkscape:window-maximized='1' inkscape:window-width='1366' inkscape:window-x='0' inkscape:window-y='25' inkscape:zoom='6.203223' objecttolerance='10' pagecolor='#ffffff' showgrid='false'/><path d='M148.93 62.356l-20.847-16.384c-1.276-1-1.276-2.642 0-3.645l20.848-16.38c1.28-1.002 1.815-2.695 1.19-3.76-.626-1.062-2.374-1.44-3.88-.84l-24.79 9.874c-1.507.606-2.927-.22-3.153-1.83L114.57 2.926C114.34 1.317 113.13 0 111.877 0c-1.247 0-2.456 1.317-2.68 2.925l-3.73 26.467c-.228 1.61-1.646 2.434-3.155 1.83l-24.38-9.71c-1.512-.602-3.975-.602-5.483 0l-24.384 9.71c-1.508.604-2.928-.22-3.154-1.83L41.186 2.925C40.956 1.317 39.748 0 38.5 0c-1.252 0-2.463 1.317-2.688 2.925l-3.73 26.467c-.226 1.61-1.645 2.434-3.153 1.83L4.14 21.35c-1.507-.603-3.252-.223-3.878.838-.625 1.066-.092 2.76 1.184 3.76l20.85 16.38c1.277 1.003 1.277 2.645 0 3.646L1.446 62.356C.166 63.358-.364 65.152.26 66.34c.627 1.19 2.372 1.668 3.877 1.064l24.567-9.866c1.51-.603 2.914.218 3.125 1.828l3.544 26.696c.214 1.607 1.618 2.923 3.12 2.923 1.5 0 2.905-1.315 3.12-2.923l3.55-26.696c.21-1.61 1.62-2.43 3.122-1.828l24.164 9.698c1.506.606 3.97.606 5.477 0l24.16-9.698c1.504-.603 2.91.218 3.125 1.828l3.55 26.696c.212 1.607 1.617 2.923 3.115 2.923 1.502 0 2.907-1.315 3.12-2.923l3.55-26.696c.216-1.61 1.62-2.43 3.124-1.828l24.57 9.866c1.5.604 3.25.125 3.876-1.063.627-1.186.094-2.98-1.185-3.982zM95.89 46.18L77.53 60.315c-1.285.99-3.393.99-4.674 0L54.49 46.18c-1.284-.99-1.294-2.62-.02-3.625l18.4-14.493c1.274-1.005 3.363-1.005 4.638 0l18.4 14.493c1.277 1.004 1.267 2.634-.02 3.626z' id='path2' style='fill:#ffffff'/> </svg></a></li></ul><form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_blank"> <input type="hidden" name="cmd" value="_donations" /> <input type="hidden" name="business" value="3LHDHWRBWMGZA" /> <input type="hidden" name="item_name" value="Help Fund the Quantum Multiverse Bifurcator" /> <input type="hidden" name="currency_code" value="USD" /> <input type="submit" value="donate" name="submit" style="width:15%;min-width:70px;"> <img alt="" border="0" src="https://www.paypal.com/en_US/i/scr/pixel.gif" width="1" height="1" /> </form><div class="posts__pagination"> <span>All content on this blog is free to use under a creative commons <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a> license</span></div></div></div></footer><script src="/assets/js/app.min.js"></script> <script> (function() { var links = document.getElementsByTagName('a'); for (var i = 0; i < links.length; i++) { if (/^(http?:)?\/\//.test(links[i].getAttribute('href'))) { links[i].target = '_blank'; } } })(); </script></body></html>
  