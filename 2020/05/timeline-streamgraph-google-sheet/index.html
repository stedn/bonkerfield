<!DOCTYPE html><html lang="en"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><title>Timeline Streamgraph from Google Sheets Data | bonkerfield</title><meta name="description" content="just your standard information identity spacetime field"><meta itemprop="name" content="will stedden"><meta itemprop="description" content="just your standard information identity spacetime field"><meta itemprop="image" content="https://bonkerfield.org/assets/images/2020/political_ads.png"><meta property="og:url" content="https://bonkerfield.org/2020/05/timeline-streamgraph-google-sheet/"><meta property="og:type" content="website"><meta property="og:title" content="Timeline Streamgraph from Google Sheets Data | bonkerfield"><meta property="og:site_name" content="bonkerfield"><meta property="og:description" content="just your standard information identity spacetime field"><meta property="og:image" content="https://bonkerfield.org/assets/images/2020/political_ads.png"><meta property="twitter:url" content="https://bonkerfield.org/2020/05/timeline-streamgraph-google-sheet/"><meta property="twitter:card" content="summary_large_image"/><meta property="twitter:title" content="Timeline Streamgraph from Google Sheets Data | bonkerfield"><meta property="twitter:site" content="bonkerfield"><meta property="twitter:description" content="just your standard information identity spacetime field"><meta property="twitter:image" content="https://bonkerfield.org/assets/images/2020/political_ads.png"><link rel="icon" type="image/x-icon" href="/assets/images/favicon.ico"><link rel="stylesheet" href="/assets/css/app.min.css"><link rel="alternate" type="application/rss+xml" title="bonkerfield" href="/feed.xml"><link rel="canonical" href="/2020/05/timeline-streamgraph-google-sheet/"><link href="https://fonts.googleapis.com/css?family=Exo" rel="stylesheet"><link rel="webmention" href="https://webmention.io/bonkerfield.org/webmention" /><link rel="pingback" href="https://webmention.io/bonkerfield.org/xmlrpc" /> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-132451521-2"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-132451521-2'); </script><link href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css' rel='stylesheet'/></head><body id="timeline-streamgraph-from-google-sheets-data" class="post-layout"><header class="header"> <span><sup><a class="header__leadin" href="https://will.stedden.org">will.stedden ></a> </sup> <a class="header__title" href="/">bonkerfield</a></span><nav><ul class="header__list"><li><a href="/fiction">fiction</a></li><li><a href="/projects">projects</a></li><li><a href="/essays">essays</a></li><li><a href="/reasons">about</a></li><li><a href="https://viewfoil.bonkerfield.org/">contact</a></li><li><a href="/search"><i class="fa fa-search"></i></a></li></ul></nav></header><a style="display:none;" class="p-author h-card" href="http://bonkerfield.org"> <img alt="" src="/assets/images/main/face_prof.jpg"/> will stedden</a><main class="bonk"><div class="post"><article class="h-entry" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting"><div class="post__header section-padding-half"><div class="grid-small"><h2 itemprop="name headline p-name">Timeline Streamgraph from Google Sheets Data</h2><time class="post__date dt-published" datetime="2020-05-10T00:00:00-05:00" itemprop="datePublished">2020·05·10</time> <span class="post__author"> | <a class="p-name u-url" href="http://will.stedden.org" title="about">will stedden</a> </span><p class="post__description p-summary"></p><a class="u-url" style="display:none;" href="https://bonkerfield.org/2020/05/timeline-streamgraph-google-sheet/"></a></div></div><div class="post__content section-padding"><div class="grid"><div class="e-content" id="markdown" itemprop="articleBody"><p> I've made a new kind of visualization called a <strong>Timeline Streamgraph</strong>. It's a modification of a conventional <a href="http://leebyron.com/streamgraph/">streamgraph</a>, flipped on its side so that time flows from bottom to top.</p><p> I built it this way to evoke the sensation we experience when we view online media <a href="https://www.lifewire.com/what-are-twitter-timelines-2655401">timelines</a>. Although a standard streamgraph can convey the same information, having to scroll down for older information tries to remind the viewer that, like media streams, the data is still being generated "in front" of them.</p><p> As an example, I generated this figure of political ad spend on Google Ads.</p><img src="/assets/images/2020/political_ads.png"/><p> I can imagine a lot of other interesting uses so I've made the viz very easy to replicate and modify. The coolest part is that it <strong>pulls data directly from a Google Sheet</strong> so I can easily keep the data fresh by just copy and pasting the new data into the sheet.</p><p> Below I have a tutorial that explains how to take my code and build one yourself.</p><h3>How to Make a Timeline Streamgraph</h3><p> To replicate this figure with your own data you just need to</p><ul><li>Fork <a href="https://codepen.io/stedn/pen/BaoxGwr">from Codepen</a> or <a href="https://gist.github.com/stedn/ccd784c9c52ce76d01e1569cd60d213e">from Github gist</a></li><li>Put data into a Google Sheet</li><li>Add the Google Sheet key to the code</li></ul><h4>Fork a gist or codepen</h4><p>I've made the code available on gist or on codepen so you can copy it from whichever is easiest for you.</p><h5>Fork from codepen</h5><p>If you have a codepen account, you can view <a href="https://codepen.io/stedn/pen/BaoxGwr">this pen</a> and click "Fork" in the bottom right corner to make a copy that you can edit.</p><h5>Fork a gist</h5><p> If you have a Github account you can view <a href="https://gist.github.com/stedn/ccd784c9c52ce76d01e1569cd60d213e">this gist</a> and "fork" a copy of it that will make it editable by you. When you do this the project will be set up at <code>https://gist.github.com/GITHUB_USERNAME/ID_OF_PROJECT</code>.</p><p> If you want to view your visualization you can use the amazing bl.ocks.org from Mike Bostock. Just go to the following URL, using the same <code>GITHUB_USERNAME</code> and <code>ID_OF_PROJECT</code> that you see for your gist.</p><pre>
https://bl.ocks.org/GITHUB_USERNAME/ID_OF_PROJECT
</pre><p> You should see an exact copy of the original vizualization. Next you just need to modify it to point to your own data.</p><h4>Putting Data in a Google Sheet</h4><p> The viz just pulls from any published Google Sheet. It looks for data in three columns with the following format and headings.</p><img src="/assets/images/2020/dataformat.png"/><p> For this demo, I wrote a query to get political ad spend from Google Ads data on BigQuery. But, keep in mind, you can use any data you want as long as it follows the <code>key</code>, <code>date</code>, <code>value</code> format. IMPORTANT, your data can not have any repeated key, date pairs. Make sure that the same data does not appear repeated for any individual key.</p><p> To allow access to your data, you need to publish the sheet. You can find the publish dialog here.</p><img src="/assets/images/2020/dataformat.png"/><p> Select to publish the entire document as web page.</p><h4>Connect D3 viz to Google Sheet</h4><p> On codepen or gist you'll see at the top of the HTML there is a variable named "google_sheets_id." Fill that in with the corresponding key from your published google sheet. You can see the key directly in the url on the edit page.</p><img src="/assets/images/2020/googlesheetkey.png"/><p> If you're using Codepen, then the page should update right away with your new data. If you are using gist you'll need to save the gist, and wait a few minutes for the changes to propagate to bl.ocks.org.</p><h5>Bonus: Add custom colors</h5><p> I've also added a way to specify the colors from the same Google Sheet. You just need to add a second sheet with a column for <code>key</code> and a column for <code>color</code>. You need to have one color for every key on the first sheet. Any key that isn't included will show up black. Also, make sure that you don't change the order of the sheets.</p><h4>Example uses</h4><p> I'm very curious what other uses people come up with for this viz. If you try something out, please <a href="https://viewfoil.bonkerfield.org">let me know</a> and I'll a link to it here.</p><ul><li>political ad spend 2020 - example from this blog post</li><li><a href="https://will.stedden.org">will.stedden project history</a> - visual curriculum vitae that shows all the projects I've worked on concurrently over the past few years</li></ul></div></div></div><div class="section-padding--none"><div class="grid"><hr class="sep" /></div></div><div class="section-padding"><div class="grid-small"><h3 class="post__discussion">Discussion Around the <a href="https://indieweb.org/Webmention">Web</a></h3><div id="webmentions"></div><hr style="margin: 5px 0;" class="sep" /><p>Join the Conversation</p><form target="_blank" name="tweet" action="https://twitter.com/share" method="get"> <input type="hidden" name="original_referer" value="https://bonkerfield.org/2020/05/timeline-streamgraph-google-sheet/"> <input type="hidden" name="source" value="bonkerfield"> <textarea style="border-color:#aaa;" id="textar" name="text" maxlength="140"></textarea> <input type="hidden" name="url" value="https://bonkerfield.org/2020/05/timeline-streamgraph-google-sheet/"> <button class="btn btn-sm btn-social btn-tw" type="submit" id="button"> <i class="fab fa-twitter"></i> <br/>comment by tweet </button> </form><hr style="margin: 5px 0;" class="sep" /> <form target="_blank" name="tweet" action="https://www.reddit.com/submit" method="get"> <input type="hidden" name="source" value="bonkerfield"> <textarea style="border-color:#aaa;" id="textar" name="title" maxlength="140"></textarea> <button class="btn btn-sm btn-social btn-rd" type="submit" id="button"> <i class="fab fa-reddit-alien"></i> <br/>submit to reddit </button> <input type="hidden" name="url" value="https://bonkerfield.org/2020/05/timeline-streamgraph-google-sheet/"> </form> <script src="/assets/js/webmention.min.js"></script></div></div></article></div><section class="related section-padding"><div class="grid-xlarge"><h2 class="related__title">Related</h2><div class="related__container"><article class="related__post"> <a class="related__link" href="https://bonkerfield.org/2020/05/timeline-streamgraph-google-sheet/"><figure class="related__img"> <img src="/assets/images/2020/political_ads.png" alt="Timeline Streamgraph from Google Sheets Data" /></figure><div><h2 class="related__text">Timeline Streamgraph from Google Sheets Data</h2></div></a></article><article class="related__post"> <a class="related__link" href="https://bonkerfield.org/2020/02/wuhan-virus-model/"><figure class="related__img"> <img src="/assets/images/2020/wuhan_overview_im.png" alt="Modeling whether an outbreak of COVID-19 virus will hit San Francisco" /></figure><div><h2 class="related__text">Modeling whether an outbreak of COVID-19 virus will hit San Francisco</h2></div></a></article><article class="related__post"> <a class="related__link" href="https://bonkerfield.org/2015/01/a-better-linkedin/"><figure class="related__img"> <img src="/assets/images/2015/better_linkedin.png" alt="A Better LinkedIn" /></figure><div><h2 class="related__text">A Better LinkedIn</h2></div></a></article></div></div></section></main><footer class="footer section-padding"><div class="grid"><div class="subscribe" id="subscribe"><div class="subscribe__container"> <span class="subscribe__title">Subscribe</span><p class="subscribe__text">Get an update when I post new content.</p><form method="POST" action="https://bonkerfield.us4.list-manage.com/subscribe/post-json?u=68d1146ea8fe327def203f254&amp;id=e88ba623c5&amp;c=?" id="mc-signup" name="mc-embedded-subscribe-form" novalidate><div style="position: absolute; left: -5000px;" aria-hidden="true"> <input type="text" name="b_68d1146ea8fe327def203f254_e88ba623c5" tabindex="-1" value=""></div><div class="form-group"> <input id="mce-EMAIL" type="email" name="EMAIL" placeholder="Email Address"></div><div class="form__btn"> <input id="mc-submit" type="submit" value="Sign Up" name="subscribe"></div></form><p class="subscribe__error hidden"></p></div></div><hr class="sep--white"/><div class="footer__container"><ul class="footer__social"><li><a href="https://fosstodon.org/@bonkerfield" rel="me" target="_blank"><i class="fab fa-mastodon"></i></a></li><li><a href="https://www.linkedin.com/in/willstedden" rel="me" target="_blank"><i class="fab fa-linkedin"></i></a></li><li><a href="https://github.com/stedn" rel="me" target="_blank"><i class="fab fa-github"></i></a></li><li><a href="https://www.reddit.com/user/bonkerfield" rel="me" target="_blank"><i class="fab fa-reddit-alien"></i></a></li></ul><form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_blank"> <input type="hidden" name="cmd" value="_donations" /> <input type="hidden" name="business" value="3LHDHWRBWMGZA" /> <input type="hidden" name="item_name" value="Help Fund the Quantum Multiverse Bifurcator" /> <input type="hidden" name="currency_code" value="USD" /> <input type="submit" value="donate" name="submit" style="width:15%;min-width:70px;"> <img alt="" border="0" src="https://www.paypal.com/en_US/i/scr/pixel.gif" width="1" height="1" /> </form><div class="posts__pagination"> <span>All content on this blog is free to use under a creative commons <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a> license</span></div></div></div></footer><script src="/assets/js/app.min.js"></script> <script> (function() { var links = document.getElementsByTagName('a'); for (var i = 0; i < links.length; i++) { if (/^(http?:)?\/\//.test(links[i].getAttribute('href'))) { links[i].target = '_blank'; } } })(); </script></body></html>
  